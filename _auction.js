!function(){const o=document.getElementById("_a-anonymous-info"),d=document.getElementById("_a-auction-submit-automatic-bid"),c=document.getElementById("_a-bids"),e=document.getElementById("_a-bids-complete"),l=document.getElementById("_a-auction-modal-automatic"),m=document.getElementById("_a-auction-modal-bids"),u=document.getElementById("_a-auction-modal-loading"),_=document.getElementById("_a-auction-modal-bid-confirm"),b=u.firstElementChild.lastElementChild,p=document.getElementById("_a-auction-submit-bid"),g=document.getElementById("_a-auto-bid"),y=document.getElementById("_a-automatic-bid-input"),n=document.getElementById("_a-banner-close-btn"),r=document.getElementById("_a-banner-div"),h=document.getElementById("_a-customer-info"),f=document.getElementById("_a-bid-input"),v=document.getElementById("_a-bid-btn"),L=document.getElementById("_a-buy-it-now-btn");buyItNowSection=document.getElementById("_a-buy-it-now-section"),errorMessage=document.getElementById("_a-error-message"),errorMessageSpan=document.getElementById("_a-error-message-span"),_bids=document.getElementById("_a-bids"),_bidPrompt=document.getElementById("_a-bid-prompt"),_countdownTimer=document.getElementById("_a-countdown-timer"),_currentBid=document.getElementById("_a-current-bid"),_endDate=document.getElementById("_a-end-date"),_reservePrice=document.getElementById("_a-reserve-price"),_reservePriceMessage=document.getElementById("_a-reserve-price-message"),_startingBid=document.getElementById("_a-starting-bid"),serverUrl="https://auction-api.packettunnel.com";let E,T,x,w,S,I,B,$,k=document.getElementById("_a-language-data").innerText;k=JSON.parse(k.replace(/&quot;/g,'"').replace(/=&gt;/g,":")),H(m),e&&e.addEventListener("click",function(){A(m)});const t=document.querySelectorAll("._a-product-photo-thumbs > li");imgContainers=document.querySelectorAll("._a-lazyload-image-wrapper");let a=imgContainers[0];for(let e=0;e<t.length;e++)t[e].addEventListener("click",function(){imgContainers[e].classList.contains("_a-hide")&&(imgContainers[e].classList.remove("_a-hide"),a.classList.add("_a-hide"),a=imgContainers[e])});function A(e){e.classList.remove("_a-hidden-menu"),e.classList.add("_a-visible-menu")}function F(e,t,a,i){let n;if(i&&!i.shopify){e=""+serverUrl+e;const s=["store_url="+_countdownTimer.getAttribute("data-shop-domain"),"store_url_alt="+Shopify.shop,"sid="+_countdownTimer.getAttribute("data-shop-id"),"shopify_product_id="+_countdownTimer.getAttribute("data-product-id")];if(i.params)for(const o in i.params)s.push(o+"="+i.params[o]);e+="?"+s.join("&")}var r=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");if(r.open(t,e),r.onreadystatechange=function(){3<r.readyState&&(200===r.status?(r.getResponseHeader("X-CSRF-Token")&&(w=r.getResponseHeader("X-CSRF-Token")),r.getResponseHeader("X-Sesh-Id")&&localStorage.setItem(window.location.origin,r.getResponseHeader("X-Sesh-Id")),a(JSON.parse(r.responseText))):N(JSON.parse(r.responseText)))},i&&i.headers)for(const d in i.headers)"application/json; charset=UTF-8"===i.headers[d]&&(n=1),r.setRequestHeader(d,i.headers[d]);return i&&i.data&&"POST"===t?n?r.send(JSON.stringify(i.data)):r.send(i.data):r.send(),r}function M(e,t,a){return a=new Date(a),`<tr><td data-label="${k.bidder}">${e}</td><td data-label="${k.amount}">${t}</td><td data-label="${k.date}">${a.toLocaleDateString(Shopify.locale)} - ${a.toLocaleTimeString(Shopify.locale)}</td></tr>`}function C(e){let t;O(),R(u),b.classList.add("_a-display-none"),b.classList.remove("_a-display-inline-block"),r.classList.remove("_a-display-none"),r.classList.add("_a-display-block"),e.k?(t="_a-banner-success",r.firstElementChild.innerText=k.automatic_bid_success,E.automatic_bid=parseFloat(y.value)/Shopify.currency.rate,y.value=""):e.outbid?(t="_a-banner-error",r.firstElementChild.innerText=k.outbid_automatic):(t="_a-banner-error",r.firstElementChild.innerText=k.error),r.classList.add(t);const a=window.setTimeout(function(){s(t)},1e4);n.addEventListener("click",function(){s(t),window.clearTimeout(a)})}function H(e,t){for(const a of e.getElementsByClassName("_a-modal-close-btn"))a.addEventListener("click",function(){let e=this;for(;e=e.parentNode,!e.classList.contains("_a-visible-menu"););R(e),t&&t()})}function P(e){return e=parseFloat(e),$!==I&&(e*=Shopify.currency.rate),parseFloat(e.toFixed(2))}function N(e){u.classList.contains("_a-visible-menu")&&R(u),b.classList.contains("_a-display-inline-block")&&(b.classList.add("_a-display-none"),b.classList.remove("_a-display-inline-block"));const t="_a-banner-error";r.classList.remove("_a-display-none"),r.classList.add("_a-display-block"),r.firstElementChild.innerText=e&&"Cart Error"===e.message?k.item_already_added:k.error,r.classList.add(t);const a=window.setTimeout(function(){s(t)},1e4);n.addEventListener("click",function(){s(t),window.clearTimeout(a)})}function D(e,t=!0){if(e=parseFloat(e),$!==I&&t&&(e*=Shopify.currency.rate),"amount"===B)return""+S+e.toFixed(2);e=e.toFixed(2).split(".");return""+S+e[0]+","+e[1]}function i(e){if(e.e)N();else{E=e;const a=new Date(e.end_date),i=a.getTime();X(i);const n=setInterval(function(){X(i,n,1)},1e3);_endDate.innerText=`${k.end_date}: ${a.toLocaleDateString(Shopify.locale,{weekday:"long",year:"numeric",month:"long",day:"numeric"})} - `+a.toLocaleTimeString(Shopify.locale);const r=document.getElementById("_a-current-bid-placeholder");if(i>Date.now()){var t;if([S,I]=_countdownTimer.getAttribute("data-currency").replace(/<[^>]*>/g,"").split(/{{.*}}\s+/),$=_countdownTimer.getAttribute("data-shop-currency"),B=_countdownTimer.getAttribute("data-currency").match(/{{(.*)}}/)[1],y.addEventListener("keypress",function(e){j(e)}),y.addEventListener("paste",function(e){j(e)}),f.addEventListener("keypress",function(e){j(e)}),f.addEventListener("paste",function(e){j(e)}),c&&c.addEventListener("click",function(){A(m)}),e.bid_count?(t=1<e.bid_count?k.bids:k.bid,_currentBid.innerText=""+D(e.highest_bid),_bids.innerText=e.bid_count+" "+t,T=P(parseFloat(e.highest_bid)+parseFloat(e.minimum_bid_increment)),_bidPrompt.innerText=`${k.enter} ${D(T,0)} ${k.or_more} (${k.bid_increment}: ${D(e.minimum_bid_increment)})`,_currentBid.parentElement.classList.remove("_a-hide")):(_startingBid.innerText=""+D(e.starting_price),T=P(parseFloat(e.starting_price)),_bidPrompt.innerText=`${k.enter} ${D(T,0)} `+k.or_more,_startingBid.parentElement.classList.remove("_a-hide")),e.maximum_bid_increment&&(x=P(Math.max(parseFloat(E.starting_price),parseFloat(E.highest_bid))+parseFloat(E.maximum_bid_increment))),e.reserve_price&&(parseFloat(E.highest_bid)>=parseFloat(E.reserve_price)&&(_reservePriceMessage.innerText=k.reserve_price_met),e.reserve_price_show?_reservePrice.innerText=`(${D(e.reserve_price)})`:_reservePrice.classList.add("_a-hide"),_reservePrice.parentElement.classList.remove("_a-hide")),r&&r.classList.add("_a-hide"),e.bids)for(const s of e.bids)m.querySelector("tbody").insertAdjacentHTML("beforeend",M(s.customer_first_name+" "+s.customer_last_name,D(s.bid),s.bid_date));e.buy_it_now_price&&(buyItNowSection.classList.remove("_a-hide"),_bidPrompt.classList.remove("_a-margin-bottom-10"),L&&L.addEventListener("click",function(){F("/cart/add.js","POST",function(e){window.location.href=L.getAttribute("data-cart-url")},{headers:{"Content-Type":"application/json; charset=UTF-8"},data:{items:[{quantity:1,id:L.getAttribute("data-product-variant-id")}]},shopify:1})})),h?(H(_),H(l,O),g.addEventListener("click",function(){A(l)}),v.addEventListener("click",function(){var e;e=parseFloat(f.value),""===f.value?(errorMessage.classList.remove("_a-hide"),errorMessageSpan.innerHTML=k.bid_empty):e<T?(errorMessage.classList.remove("_a-hide"),errorMessageSpan.innerHTML=k.bid_minimum+": "+D(T,0)):x&&e>x?(errorMessage.classList.remove("_a-hide"),errorMessageSpan.innerHTML=`${k.error_maximum_bid_increment}: ${D(E.maximum_bid_increment)}.  ${k.error_maximum_bid_increment_after}: ${D(x,0)}.`):A(_)}),d.addEventListener("click",function(){const e=parseFloat(y.value);let t;var a;E.maximum_bid_increment&&(a=P(parseFloat(E.automatic_bid)+parseFloat(E.maximum_bid_increment)),E.automatic_bid&&a>x?t=a:x&&(t=x)),y.value.length?e<=P(E.automatic_bid)?U(k.automatic_bid_minimum):e<=T?U(k.automatic_bid_higher):t&&e>t?U(`${k.error_maximum_bid_increment_after}: ${D(t,0)}.`):(R(l),F("/auction/automatic_bid","POST",C,{headers:{"Content-Type":"application/json; charset=UTF-8","x-anonymous-id":o.getAttribute("data-anonymous-derples"),"x-product-url":o.getAttribute("data-product-url"),"x-sesh-id":localStorage.getItem(window.location.origin),"x-sesh-token":h.getAttribute("data-customer-derples")},data:{_csrf:w,customer_id:h.getAttribute("data-customer-id"),customer_email:h.getAttribute("data-customer-email"),customer_first_name:h.getAttribute("data-customer-first-name"),customer_last_name:h.getAttribute("data-customer-last-name"),currency:Shopify.currency.active,bid:e.toFixed(2)/parseFloat(Shopify.currency.rate)}}),A(u),b.classList.remove("_a-display-none"),b.classList.add("_a-display-inline-block")):U(k.bid_empty)}),p.addEventListener("click",function(){R(_),F("/auction/place_bid","POST",q,{headers:{"Content-Type":"application/json; charset=UTF-8","x-anonymous-id":o.getAttribute("data-anonymous-derples"),"x-product-url":o.getAttribute("data-product-url"),"x-sesh-id":localStorage.getItem(window.location.origin),"x-sesh-token":h.getAttribute("data-customer-derples")},data:{_csrf:w,customer_id:h.getAttribute("data-customer-id"),customer_email:h.getAttribute("data-customer-email"),customer_first_name:h.getAttribute("data-customer-first-name"),customer_last_name:h.getAttribute("data-customer-last-name"),currency:Shopify.currency.active,bid:(parseFloat(f.value)/Shopify.currency.rate).toFixed(2)}}),A(u),b.classList.remove("_a-display-none"),b.classList.add("_a-display-inline-block")})):(g.addEventListener("click",function(){J()}),v.addEventListener("click",function(){J()}))}else r.parentElement.classList.add("_a-hide")}}function j(e){var t,e=e||window.event;t="paste"===e.type?e.clipboardData.getData("text/plain"):(t=e.keyCode||e.which,String.fromCharCode(t));/[0-9]|\./.test(t)||(e.returnValue=!1,e.preventDefault&&e.preventDefault())}function q(e){let t;var a;R(u),b.classList.add("_a-display-none"),b.classList.remove("_a-display-inline-block"),r.classList.remove("_a-display-none"),r.classList.add("_a-display-block"),e.date?(t="_a-banner-success",r.firstElementChild.innerText=k.bid_success,E.highest_bid=parseFloat(f.value).toFixed(2),E.bid_count=E.bid_count+1,a={customer_first_name:e.first_name,customer_last_name:e.last_name,bid:E.highest_bid,bid_date:e.date},E.bids?E.bids.unshift(a):E.bids=[a],_bids.parentNode.classList.contains("_a-hide")?(_bids.parentNode.nextElementSibling.classList.add("_a-hide"),_bids.parentNode.classList.remove("_a-hide"),_bids.innerText="1 "+k.bid):_bids.innerText=E.bid_count+" "+k.bids,_currentBid.innerText=D(E.highest_bid,0),T=parseFloat(E.highest_bid)+P(E.minimum_bid_increment),x=parseFloat(E.highest_bid)+P(E.maximum_bid_increment),_bidPrompt.innerText=`${k.enter} ${D(T,0)} ${k.or_more} (${k.bid_increment}: ${D(E.minimum_bid_increment)})`,m.querySelector("tbody").insertAdjacentHTML("beforebegin",M(e.first_name+" "+e.last_name,_currentBid.innerText,e.date)),f.value="",errorMessage.classList.add("_a-hide")):e.double_bid?(t="_a-banner-error",r.firstElementChild.innerText=k.error_bid_highest):e.outbid?(t="_a-banner-error",r.firstElementChild.innerText=k.outbid_regular):(t="_a-banner-error",r.firstElementChild.innerText=k.error),r.classList.add(t);const i=window.setTimeout(function(){s(t)},1e4);n.addEventListener("click",function(){s(t),window.clearTimeout(i)})}function O(){y.classList.remove("_a-input-error");const e=y.parentElement.firstElementChild;e.classList.add("_a-display-none"),e.classList.remove("_a-display-block")}function s(e){r.classList.add("_a-display-none"),r.classList.remove("_a-display-block"),r.classList.remove(e)}function R(e){e.classList.remove("_a-visible-menu"),e.classList.add("_a-hidden-menu")}function X(e,t,a=!1){var i=e-(new Date).getTime();if(i<0){a&&clearInterval(t),_countdownTimer.innerHTML=k.auction_end;const n=document.getElementById("_a-auction-inputs-container");n&&n.parentNode.removeChild(n),l.parentNode.removeChild(l),_.parentNode.removeChild(_)}else{e=Math.floor(i/864e5),a=Math.floor(i%864e5/36e5),t=Math.floor(i%36e5/6e4),i=Math.floor(i%6e4/1e3);_countdownTimer.innerHTML=""+e+k.timer.days+` ${a}${k.timer.hours} ${t}${k.timer.minutes} `+i+k.timer.seconds}}function U(e){y.classList.add("_a-input-error");const t=y.parentElement.firstElementChild;t.classList.remove("_a-display-none"),t.classList.add("_a-display-block"),t.firstElementChild.innerText=e}function J(){errorMessage.classList.remove("_a-hide"),errorMessageSpan.innerHTML=`${k.login_message.you_must} <a href="${errorMessage.getAttribute("data-login-url")}" class="_a-underline" target="_blank">${k.login_message.login}</a> ${k.login_message.or} <a href="${errorMessage.getAttribute("data-register-url")}" class="_a-underline" target="_blank">${k.login_message.create_account}</a> `+k.login_message.place_bid}document.getElementById("_a-auction-inputs")&&(localStorage.getItem(window.location.origin)&&o&&h?F("/auction/get_bids","GET",i,{headers:{"x-anonymous-id":o.getAttribute("data-anonymous-derples"),"x-product-url":o.getAttribute("data-product-url"),"x-sesh-id":localStorage.getItem(window.location.origin)},params:{customer_id:h.getAttribute("data-customer-id")}}):o&&h?F("/auction/get_bids","GET",i,{headers:{"x-anonymous-id":o.getAttribute("data-anonymous-derples"),"x-product-url":o.getAttribute("data-product-url")},params:{customer_id:h.getAttribute("data-customer-id")}}):o?F("/auction/get_bids","GET",i,{headers:{"x-anonymous-id":o.getAttribute("data-anonymous-derples"),"x-product-url":o.getAttribute("data-product-url")}}):N())}();